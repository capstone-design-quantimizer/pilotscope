# ëª¨ë¸ ê´€ë¦¬ ì‹œìŠ¤í…œ ì‚¬ìš© ê°€ì´ë“œ

> íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ ëª¨ë¸ ë²„ì „ ê´€ë¦¬ + í’ë¶€í•œ ë©”íƒ€ë°ì´í„°

---

## ğŸ‰ êµ¬í˜„ ì™„ë£Œ!

### ìƒˆë¡œìš´ ê¸°ëŠ¥

1. âœ… **íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ ì €ì¥**: ì´ë¦„ ì¶©ëŒ ì—†ìŒ, ë¶€ë‹´ ì—†ì´ ì €ì¥
2. âœ… **í’ë¶€í•œ ë©”íƒ€ë°ì´í„°**: íŒŒë¼ë¯¸í„°, ë°ì´í„°ì…‹, ì„±ëŠ¥ ëª¨ë‘ ê¸°ë¡
3. âœ… **Train/Test ë¶„ë¦¬**: í•œ ëª¨ë¸ì„ ì—¬ëŸ¬ ë°ì´í„°ì…‹ì—ì„œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
4. âœ… **ì¤‘ì•™ ë ˆì§€ìŠ¤íŠ¸ë¦¬**: ìµœì  ëª¨ë¸ ì°¾ê¸°, ë¹„êµ, ì •ë¦¬ ìë™í™”
5. âœ… **CLI ë„êµ¬**: í„°ë¯¸ë„ì—ì„œ ëª¨ë¸ ê´€ë¦¬

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
ExampleData/
â”œâ”€â”€ Mscn/
â”‚   â”œâ”€â”€ Model/
â”‚   â”‚   â”œâ”€â”€ mscn_20241019_103000          # íƒ€ì„ìŠ¤íƒ¬í”„ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ mscn_20241019_103000.json     # ë©”íƒ€ë°ì´í„°
â”‚   â”‚   â”œâ”€â”€ mscn_20241019_150000
â”‚   â”‚   â”œâ”€â”€ mscn_20241019_150000.json
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ training_registry.json
â”œâ”€â”€ Lero/
â”‚   â”œâ”€â”€ Model/
â”‚   â”‚   â”œâ”€â”€ lero_20241019_110000
â”‚   â”‚   â””â”€â”€ ...
â””â”€â”€ model_registry.json                   # ì¤‘ì•™ ë ˆì§€ìŠ¤íŠ¸ë¦¬
```

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. í•™ìŠµ ë° ìë™ ì €ì¥

```bash
# MSCN í•™ìŠµ (ìë™ìœ¼ë¡œ íƒ€ì„ìŠ¤íƒ¬í”„ ì´ë¦„ ìƒì„± ë° ë©”íƒ€ë°ì´í„° ì €ì¥)
cd test_example_algorithms
python unified_test.py --algo mscn --db production --epochs 100

# ì¶œë ¥ ì˜ˆì‹œ:
# âœ… Model saved: ExampleData/Mscn/Model/mscn_20241019_103000
# âœ… Metadata saved: mscn_20241019_103000.json
# âœ… Model registered: mscn_20241019_103000
```

### 2. ê°™ì€ ëª¨ë¸ë¡œ ì—¬ëŸ¬ ë°ì´í„°ì…‹ í…ŒìŠ¤íŠ¸

```bash
# 1. Production ë°ì´í„°ë¡œ í•™ìŠµ
python unified_test.py --algo mscn --db production --epochs 100
# â†’ ì €ì¥: mscn_20241019_100000

# 2. ê·¸ ëª¨ë¸ë¡œ stats_tiny í…ŒìŠ¤íŠ¸ (í•™ìŠµ ì•ˆí•¨)
python unified_test.py \
    --algo mscn \
    --db stats_tiny \
    --no-training \
    --load-model mscn_20241019_100000
# â†’ ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸: testing ë°°ì—´ì— stats_tiny ê²°ê³¼ ì¶”ê°€

# 3. ê°™ì€ ëª¨ë¸ë¡œ imdb í…ŒìŠ¤íŠ¸
python unified_test.py \
    --algo mscn \
    --db imdb \
    --no-training \
    --load-model mscn_20241019_100000
# â†’ ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸: testing ë°°ì—´ì— imdb ê²°ê³¼ ì¶”ê°€
```

### 3. ìµœì  ëª¨ë¸ ìë™ ë¡œë“œ

```bash
# í•™ìŠµ ì•ˆí•˜ê³  í…ŒìŠ¤íŠ¸ë§Œ í•˜ë©´ ìë™ìœ¼ë¡œ ìµœì  ëª¨ë¸ ë¡œë“œ
python unified_test.py --algo mscn --db production --no-training

# ì¶œë ¥:
# ğŸ“Š Loading best model for production: mscn_20241019_110000
```

---

## ğŸ› ï¸ CLI ë„êµ¬ ì‚¬ìš©ë²•

### ëª¨ë¸ ëª©ë¡ ì¡°íšŒ

```bash
cd scripts

# ëª¨ë“  ëª¨ë¸ ì¡°íšŒ
python model_manager.py list

# MSCN ëª¨ë¸ë§Œ ì¡°íšŒ
python model_manager.py list --algo mscn

# Production ë°ì´í„°ë¡œ í•™ìŠµí•œ ëª¨ë¸ë§Œ
python model_manager.py list --algo mscn --dataset production

# íŠ¹ì • íƒœê·¸ê°€ ìˆëŠ” ëª¨ë¸ë§Œ
python model_manager.py list --tags production best
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
====================================================================================================
Found 5 models
====================================================================================================
Model ID                         Algorithm  Train Dataset    Tests  Tags
----------------------------------------------------------------------------------------------------
mscn_20241019_150000             mscn       production       3      production, best
mscn_20241019_140000             mscn       production       2      production
mscn_20241019_130000             mscn       stats_tiny       1      test
lero_20241019_120000             lero       production       2      production
lero_20241019_110000             lero       imdb             1      -
====================================================================================================
```

### ìµœì  ëª¨ë¸ ì°¾ê¸°

```bash
# MSCN ìµœì  ëª¨ë¸
python model_manager.py best --algo mscn

# Production ë°ì´í„°ì…‹ì—ì„œ ìµœì  ëª¨ë¸
python model_manager.py best --algo mscn --dataset production
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
================================================================================
ğŸ† Best Model: mscn_20241019_110000
================================================================================

Training:
  Dataset:      production
  Hyperparams:  {'num_epoch': 100, 'num_training': 500, 'num_collection': 500}
  Training Time: 1800.5s

Test Results:
  production:
    Total Time:   42.15s
    Average Time: 0.4215s
    Queries:      100
  stats_tiny:
    Total Time:   35.20s
    Average Time: 0.4400s
    Queries:      80

Tags: production, best
================================================================================
```

### ëª¨ë¸ ë¹„êµ

```bash
# ì—¬ëŸ¬ ëª¨ë¸ ë¹„êµ
python model_manager.py compare \
    mscn_20241019_103000 \
    mscn_20241019_110000 \
    mscn_20241019_120000
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
====================================================================================================
Model Comparison
====================================================================================================
Model ID                       Train Dataset   Test Dataset    Total Time   Avg Time   Epochs  
----------------------------------------------------------------------------------------------------
mscn_20241019_103000           production      production      45.23        0.4523     100     
                                               stats_tiny      36.12        0.4515     
mscn_20241019_110000           production      production      42.15        0.4215     100     
                                               stats_tiny      35.20        0.4400     
mscn_20241019_120000           production      production      48.56        0.4856     50      
====================================================================================================
```

### ëª¨ë¸ ìƒì„¸ ì •ë³´

```bash
python model_manager.py show mscn_20241019_103000
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
================================================================================
Model: mscn_20241019_103000
================================================================================

Algorithm: mscn
Created: 2024-10-19T10:30:00

Training:
  Dataset:      production
  Trained At:   2024-10-19T10:45:00
  Num Queries:  500
  Training Time: 1800.5s
  Hyperparameters:
    num_epoch: 100
    num_training: 500
    num_collection: 500
    enable_collection: True
    enable_training: True

Test Results (2 tests):

  Test #1 - production:
    Tested At:    2024-10-19T12:00:00
    Num Queries:  100
    Total Time:   45.23s
    Average Time: 0.4523s

  Test #2 - stats_tiny:
    Tested At:    2024-10-19T13:00:00
    Num Queries:  80
    Total Time:   36.12s
    Average Time: 0.4515s

Tags: production, experiment

Files:
  Model:    ExampleData/Mscn/Model/mscn_20241019_103000
  Metadata: ExampleData/Mscn/Model/mscn_20241019_103000.json
================================================================================
```

### íƒœê·¸ ê´€ë¦¬

```bash
# íƒœê·¸ ì¶”ê°€
python model_manager.py tag mscn_20241019_103000 production best

# íƒœê·¸ ì œê±°
python model_manager.py tag mscn_20241019_103000 experiment --remove
```

### ì˜¤ë˜ëœ ëª¨ë¸ ì •ë¦¬

```bash
# ìƒìœ„ 5ê°œë§Œ ìœ ì§€í•˜ê³  ë‚˜ë¨¸ì§€ ì‚­ì œ
python model_manager.py cleanup --algo mscn --keep 5

# í™•ì¸ ì—†ì´ ë°”ë¡œ ì‚­ì œ
python model_manager.py cleanup --algo mscn --keep 5 --yes
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
ğŸ—‘ï¸  Cleaning up mscn models...
   Keeping top 5 models by total_time

Proceed? (yes/no): yes

ğŸ—‘ï¸  Deleted: mscn_20241018_100000
ğŸ—‘ï¸  Deleted: mscn_20241018_110000
ğŸ—‘ï¸  Deleted: mscn_20241018_120000

âœ… Cleanup complete: 3 models deleted, 5 kept
```

### ìš”ì•½ ë³´ê¸°

```bash
# ì „ì²´ ìš”ì•½
python model_manager.py summary

# íŠ¹ì • ì•Œê³ ë¦¬ì¦˜ë§Œ
python model_manager.py summary --algo mscn
```

---

## ğŸ’¡ ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì‹¤í—˜ì  í•™ìŠµ (ì„ì‹œ ì €ì¥)

```bash
# 1. ì—¬ëŸ¬ íŒŒë¼ë¯¸í„° ì¡°í•© ì‹œë„ (ë¶€ë‹´ ì—†ì´ ì €ì¥)
python unified_test.py --algo mscn --db production --epochs 50
python unified_test.py --algo mscn --db production --epochs 100
python unified_test.py --algo mscn --db production --epochs 200

# 2. ê²°ê³¼ ë¹„êµ
python scripts/model_manager.py list --algo mscn

# 3. ìµœì  ëª¨ë¸ íƒœê·¸
python scripts/model_manager.py best --algo mscn
# ğŸ† Best Model: mscn_20241019_110000

python scripts/model_manager.py tag mscn_20241019_110000 best production

# 4. ì•ˆì¢‹ì€ ëª¨ë¸ ì •ë¦¬
python scripts/model_manager.py cleanup --algo mscn --keep 3
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: Cross-Dataset í‰ê°€

```bash
# 1. IMDB ë°ì´í„°ë¡œ í•™ìŠµ
python unified_test.py --algo mscn --db imdb --epochs 100
# â†’ mscn_20241019_100000

# 2. ê·¸ ëª¨ë¸ë¡œ ì—¬ëŸ¬ ë°ì´í„°ì…‹ í…ŒìŠ¤íŠ¸
python unified_test.py --algo mscn --db production \
    --no-training --load-model mscn_20241019_100000

python unified_test.py --algo mscn --db stats_tiny \
    --no-training --load-model mscn_20241019_100000

# 3. ê²°ê³¼ í™•ì¸
python scripts/model_manager.py show mscn_20241019_100000

# Output:
# Training: imdb
# Test Results:
#   - imdb: 120.5s
#   - production: 45.2s
#   - stats_tiny: 35.1s
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: í”„ë¡œë•ì…˜ ë°°í¬

```bash
# 1. ìµœì  ëª¨ë¸ ì°¾ê¸°
python scripts/model_manager.py best --algo mscn --dataset production

# 2. í”„ë¡œë•ì…˜ íƒœê·¸ ì¶”ê°€
python scripts/model_manager.py tag mscn_20241019_110000 production deployed

# 3. í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì‚¬ìš©
python unified_test.py --algo mscn --db production --no-training
# â†’ ìë™ìœ¼ë¡œ mscn_20241019_110000 ë¡œë“œ

# 4. ì£¼ê¸°ì ìœ¼ë¡œ ì¬í‰ê°€
python unified_test.py --algo mscn --db production --no-training
# â†’ ìƒˆ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸, ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸
```

---

## ğŸ“Š ë©”íƒ€ë°ì´í„° êµ¬ì¡°

```json
{
  "model_id": "mscn_20241019_103000",
  "algorithm": "mscn",
  "model_path": "ExampleData/Mscn/Model/mscn_20241019_103000",
  
  "training": {
    "enabled": true,
    "dataset": "production",
    "num_queries": 500,
    "hyperparams": {
      "num_epoch": 100,
      "num_training": 500,
      "num_collection": 500,
      "enable_collection": true,
      "enable_training": true
    },
    "trained_at": "2024-10-19T10:45:00",
    "training_time": 1800.5
  },
  
  "testing": [
    {
      "dataset": "production",
      "num_queries": 100,
      "tested_at": "2024-10-19T12:00:00",
      "performance": {
        "total_time": 45.23,
        "average_time": 0.4523,
        "num_queries": 100
      }
    },
    {
      "dataset": "stats_tiny",
      "num_queries": 80,
      "tested_at": "2024-10-19T13:00:00",
      "performance": {
        "total_time": 36.12,
        "average_time": 0.4515,
        "num_queries": 80
      }
    }
  ],
  
  "tags": ["production", "best"],
  "notes": "Production ë°ì´í„°ë¡œ í•™ìŠµ, ì—¬ëŸ¬ ë°ì´í„°ì…‹ì—ì„œ ì¢‹ì€ ì„±ëŠ¥",
  "created_at": "2024-10-19T10:30:00"
}
```

---

## ğŸ”§ Python API ì‚¬ìš©

### í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ ëª¨ë¸ ê´€ë¦¬

```python
from pilotscope.ModelRegistry import ModelRegistry
from pilotscope.EnhancedPilotModel import EnhancedPilotModel
from algorithm_examples.Mscn.MscnPilotModel import MscnPilotModel

# 1. ë ˆì§€ìŠ¤íŠ¸ë¦¬ ìƒì„±
registry = ModelRegistry()

# 2. ìµœì  ëª¨ë¸ ì°¾ê¸°
best = registry.get_best_model("mscn", test_dataset="production")
print(f"Best model: {best['model_id']}")

# 3. ëª¨ë¸ ë¡œë“œ
model = MscnPilotModel.load_model(best['model_id'], "mscn")

# 4. ìƒˆë¡œìš´ ë°ì´í„°ì…‹ì—ì„œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì¶”ê°€
model.add_test_result("new_dataset", 100, {
    "total_time": 50.5,
    "average_time": 0.505
})
model.save_model()

# 5. ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì—…ë°ì´íŠ¸
registry.register_model(model.metadata)

# 6. íƒœê·¸ ì¶”ê°€
registry.tag_model(model.model_id, "validated", "production")

# 7. ëª¨ë¸ ë¹„êµ
registry.compare_models([
    "mscn_20241019_103000",
    "mscn_20241019_110000"
])

# 8. ì •ë¦¬
deleted = registry.cleanup_old_models("mscn", keep_top_n=5)
print(f"Deleted {len(deleted)} models")
```

---

## âœ¨ ì£¼ìš” ì¥ì 

| ê¸°ëŠ¥ | ì´ì „ (íŒŒë¼ë¯¸í„° ê¸°ë°˜) | í˜„ì¬ (íƒ€ì„ìŠ¤íƒ¬í”„ + ë©”íƒ€ë°ì´í„°) |
|------|---------------------|------------------------------|
| ì´ë¦„ ì¶©ëŒ | âŒ ë°ì´í„°ì…‹ ë‹¤ë¥´ë©´ ë®ì–´ì“°ê¸° | âœ… ì ˆëŒ€ ì—†ìŒ |
| ì„ì‹œ ì €ì¥ | âŒ ì´ë¦„ ì„¤ê³„ í•„ìš” | âœ… ë¶€ë‹´ ì—†ì´ ì €ì¥ |
| Train/Test ë¶„ë¦¬ | âŒ ë¶ˆê°€ëŠ¥ | âœ… ì™„ë²½ ì§€ì› |
| ì—¬ëŸ¬ ë°ì´í„°ì…‹ í…ŒìŠ¤íŠ¸ | âŒ ë§¤ë²ˆ ìƒˆ ëª¨ë¸ | âœ… í•œ ëª¨ë¸ì— ëˆ„ì  |
| ìµœì  ëª¨ë¸ ì°¾ê¸° | âš ï¸ ìˆ˜ë™ | âœ… ìë™ |
| ëª¨ë¸ ë¹„êµ | âš ï¸ ì–´ë ¤ì›€ | âœ… ì‰¬ì›€ |
| ëª¨ë¸ ì •ë¦¬ | âŒ ìˆ˜ë™ | âœ… ìë™ |
| ì‹¤í—˜ ì¶”ì  | âš ï¸ ì œí•œì  | âœ… ì™„ë²½ |

---

## ğŸ¯ ìš”ì•½

### êµ¬í˜„ëœ ê¸°ëŠ¥

1. âœ… **EnhancedPilotModel**: íƒ€ì„ìŠ¤íƒ¬í”„ + ë©”íƒ€ë°ì´í„°
2. âœ… **ModelRegistry**: ì¤‘ì•™ ë ˆì§€ìŠ¤íŠ¸ë¦¬
3. âœ… **MscnPilotModel / LeroPilotModel**: Enhanced ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ
4. âœ… **PresetScheduler**: ìë™ ë©”íƒ€ë°ì´í„° ì„¤ì •
5. âœ… **unified_test.py**: ìë™ ëª¨ë¸ ì €ì¥ ë° ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë“±ë¡
6. âœ… **model_manager.py**: CLI ê´€ë¦¬ ë„êµ¬

### ì‚¬ìš© íë¦„

```
í•™ìŠµ â†’ íƒ€ì„ìŠ¤íƒ¬í”„ ëª¨ë¸ ìƒì„± â†’ ë©”íƒ€ë°ì´í„° ì €ì¥ â†’ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë“±ë¡
  â†“
í…ŒìŠ¤íŠ¸ â†’ ê¸°ì¡´ ëª¨ë¸ ë¡œë“œ â†’ ê²°ê³¼ ì¶”ê°€ â†’ ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸
  â†“
ê´€ë¦¬ â†’ CLIë¡œ ì¡°íšŒ/ë¹„êµ/ì •ë¦¬ â†’ ìµœì  ëª¨ë¸ ì„ íƒ â†’ í”„ë¡œë•ì…˜ ë°°í¬
```

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- **ìƒì„¸ ê°€ì´ë“œ**: `improved_model_management.md`
- **ì•„í‚¤í…ì²˜**: `ìš´ì˜_ë°ì´í„°_ê¸°ë°˜_ìµœì í™”_ê°€ì´ë“œ.md`
- **ë¹ ë¥¸ ì‹œì‘**: `ë¹ ë¥¸_ì‹œì‘_ê°€ì´ë“œ.md`

---

**ğŸ‰ ì´ì œ ë¶€ë‹´ ì—†ì´ ì‹¤í—˜í•˜ê³ , ìµœì  ëª¨ë¸ì„ ì°¾ê³ , íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!**

